<?xml version="1.0" encoding="utf-8"?>
<manifest
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  package="com.abona_erp.driver.app"
  android:installLocation="auto">

  <uses-sdk tools:overrideLibrary="androidx.camera.core,androidx.camera.camera2"/>

  <!-- Google Maps for Android v2 requires OpenGL ES v2 -->
  <uses-feature android:glEsVersion="0x00020000" android:required="true" />

  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <!-- Required if your app targets Android 10 (API level 29) or higher -->
  <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
  <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE"/>
  <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>

  <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
  <uses-permission android:name="android.permission.WAKE_LOCK" />

  <uses-permission android:name="android.permission.READ_PHONE_STATE" />
  <uses-permission android:name="android.permission.ACCESS_NOTIFICATION_POLICY"/>

  <uses-permission android:name="com.samsung.android.providers.context.permission.WRITE_USE_APP_FEATURE_SURVEY" />

  <application
    android:name=".App"
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:supportsRtl="true"
    android:hardwareAccelerated="true"
    android:theme="@style/AppTheme"
    tools:ignore="GoogleAppIndexingWarning">

    <meta-data
      android:name="com.google.android.maps.v2.API_KEY"
      android:value="@string/google_maps_api_key"
      />

    <meta-data
      android:name="com.google.android.gms.version"
      android:value="@integer/google_play_services_version"
      />

    <activity android:name=".ui.feature.main.MainActivity"
      android:launchMode="singleTask"
      android:screenOrientation="landscape">
      <intent-filter>
        <action android:name="android.intent.action.MAIN"/>

        <category android:name="android.intent.category.LAUNCHER"/>
        <!--<category android:name="android.intent.category.HOME"/>
        <category android:name="android.intent.category.DEFAULT"/>-->
      </intent-filter>
    </activity>

    <!-- FCM Notifications -->
    <service
      android:name=".service.FcmService"
      android:exported="false">
      <intent-filter>
        <action android:name="com.google.firebase.MESSAGING_EVENT" />
      </intent-filter>
    </service>

    <service android:name=".service.NotificationService" android:exported="false">
      <intent-filter>
        <action android:name="com.firebase.jobdispatcher.ACTION_EXECUTE"/>
      </intent-filter>
    </service>

    <meta-data
      android:name="com.google.firebase.messaging.default_notification_icon"
      android:resource="@drawable/ic_notifications"
      />

    <meta-data
      android:name="com.google.firebase.messaging.default_notification_color"
      android:resource="@color/clrFont"
      />
    <!-- FCM Notifications -->

    <!-- GEOFENCING -->
    <receiver android:name=".receiver.GeofenceBroadcastReceiver"
      android:enabled="true"
      android:exported="true"
      />

    <service
      android:name=".service.GeofenceService"
      android:exported="true"
      android:permission="android.permission.BIND_JOB_SERVICE"
      />
    <!-- GEOFENCING -->

    <!-- RE-START -->
    <receiver
      android:name=".receiver.AutoReStartBootReceiver"
      android:enabled="true"
      android:exported="true"
      android:permission="android.permission.RECEIVE_BOOT_COMPLETED">

      <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED"/>
        <action android:name="android.intent.action.QUICKBOOT_POWERON"/>
        <action android:name="com.htc.intent.action.QUICKBOOT_POWERON"/>

        <category android:name="android.intent.category.DEFAULT"/>
      </intent-filter>

    </receiver>
    <!-- RE-START -->

    <!-- Necessary for apps that target Android 9.0 or higher -->
    <uses-library android:name="org.apache.http.legacy" android:required="false" />

  </application>

</manifest>